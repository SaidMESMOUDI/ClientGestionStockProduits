<h3>Produits</h3>
<div class="container">
  <div class="row">
    <div class="col-md-8">
      <table class="table table-sm table-hover table-responsive-md text-center" >
        <thead class="text-primary">
          <tr>
            <th>Référence</th> <th>Quantité</th> <th>Prix Unitaire</th>
            <th>
              <button class="btn btn-outline-primary btn-sm" (click)="operation ='add'; initProduit(); ">
                <i class="fas fa-plus"></i>
              </button>
            </th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let produit of produits">
            <td>{{produit.ref}}</td> <td>{{produit.quantite}}</td> <td>{{produit.prixUnitaire}}</td>
            <td>
              <button class="btn btn-outline-warning btn-sm" (click)="operation ='edit'; selectedProduit=produit;">
                <i class="far fa-edit"></i>
              </button>
            </td>
            <td>
              <button class="btn btn-outline-danger btn-sm"  (click)="operation ='remove'; selectedProduit=produit;">
                <i class="fas fa-trash-alt"></i>
              </button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
    <div class="col-md-4">
      <div class="card">
        <div class="card-header bg-secondary text-white">
          {{operation == 'add' ? 'Ajouter un produit' :
            operation == 'edit' ? 'Modifier un produit' :
            operation == 'remove' ? 'Supprimer un produit': ''
          }}
        </div>
        <div class="card-body">
          <div *ngIf="operation == 'add' || operation == 'edit'">
            <form [formGroup]="produitForm">
              <div class="form-group">
                <label for="ref">Référence:</label>
                <input id="ref" type="text" class="form-control" formControlName="ref" [(ngModel)]="selectedProduit.ref"/>
              </div>
              <div class="alert alert-danger small"  *ngIf="produitForm.controls['ref'].invalid &&
                (produitForm.controls['ref'].touched || produitForm.controls['ref'].dirty)">
                Référence est obligatoire!
              </div>
              <div class="form-group">
                <label for="quantite">Quantité:</label>
                <input id="quantite" type="number" class="form-control" formControlName="quantite" [(ngModel)]="selectedProduit.quantite"/>
              </div>
              <div class="alert alert-danger small" *ngIf="produitForm.controls['quantite'].invalid &&
                (produitForm.controls['quantite'].dirty)">
                Quantité min=1, max=500
              </div>
              <div class="form-group">
                <label for="prixUnitaire">Prix Unitaire:</label>
                <input id="prixUnitaire" type="number" class="form-control" formControlName="prixUnitaire" [(ngModel)]="selectedProduit.prixUnitaire"/>
              </div>
              <div class="alert alert-danger small" *ngIf="produitForm.controls['prixUnitaire'].invalid &&
                (produitForm.controls['prixUnitaire'].dirty)">
                Prix min = 0.1
              </div>
              <button [disabled]="produitForm.pristine || produitForm.invalid" type="submit"
                      class="btn btn-success btn-sm"
                      (click)="operation == 'add' ? addProduit() : updateProduit()">
                {{operation == 'add' ? 'Ajouter' : operation == 'edit' ? 'Modifier' : '' }}
                <!--{{operation == 'add' ? 'Ajouter' :
                  operation == 'edit' ? 'Modifier' : 'Supprimer' }}-->
              </button>
            </form>
          </div>
          <div  *ngIf="operation == 'remove'">
            <h6 class="text-black-50">
              {{selectedProduit.ref}}
            </h6>
            <p class="alert-warning text-danger"  [hidden]="!selectedProduit.ref">
              Voulez-vous supprimer ce produit ?
            </p>
            <p class="alert-success" [hidden]="selectedProduit.ref">
              Le produit a bien été supprimé !
            </p>
            <button class="btn btn-danger btn-sm" (click)="deleteProduit()"
                    [hidden]="!selectedProduit.ref" > Confirmer
            </button>
          </div>
        </div>
        <div class="card-footer">
          footer
        </div>
      </div>
    </div>
  </div>
</div>



